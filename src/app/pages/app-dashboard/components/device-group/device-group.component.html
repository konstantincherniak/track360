<mat-expansion-panel [expanded]="group().isCurrentDevice">
  <mat-expansion-panel-header>
    <mat-panel-title>
      <mat-icon>{{
        group().isCurrentDevice ? "computer" : "devices_other"
      }}</mat-icon>
      <span class="device-label">
        @if (group().isCurrentDevice) {
          This Device
        } @else {
          Device
        }
      </span>
      <span class="device-id">{{ group().deviceId | slice: 0 : 8 }}...</span>
    </mat-panel-title>
    <mat-panel-description>
      <span
        [matBadge]="group().tabs.length"
        matBadgeOverlap="false"
        matBadgeSize="small"
      >
        {{ group().tabs.length }} tab{{ group().tabs.length !== 1 ? "s" : "" }}
      </span>
    </mat-panel-description>
  </mat-expansion-panel-header>

  <div class="tabs-list">
    @for (tab of group().tabs; track tab.tab_id) {
      <app-tab-card
        [tab]="tab"
        [isCurrentTab]="_userTabsService.isCurrentTab(tab)"
      />
    }
  </div>
</mat-expansion-panel>
